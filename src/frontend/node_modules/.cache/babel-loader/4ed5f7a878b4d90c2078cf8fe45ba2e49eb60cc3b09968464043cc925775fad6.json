{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const Login=()=>{const[formData,setFormData]=useState({username:'',password:''});const[errorMessage,setErrorMessage]=useState('');const navigate=useNavigate();const handleChange=e=>{setFormData({...formData,[e.target.id]:e.target.value});};const login=async e=>{e.preventDefault();try{const response=await fetch('/users/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username:formData.username,password:formData.password})});if(response.ok){localStorage.setItem('username',formData.username);window.dispatchEvent(new Event('loginStateChanged'));// Dispatch custom event\nnavigate('/peep');// Redirect to peep page\n}else{const errorText=await response.text();setErrorMessage(errorText);}}catch(error){setErrorMessage('Login failed. Please try again.');}};return/*#__PURE__*/_jsx(\"main\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:login,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"username\",value:formData.username,onChange:handleChange,required:true,autoFocus:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{id:\"password\",type:\"password\",className:\"form-control\",value:formData.password,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Login\"})]}),errorMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"text-danger\",children:/*#__PURE__*/_jsx(\"h3\",{children:errorMessage})})]})});};","map":{"version":3,"names":["React","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","Login","formData","setFormData","username","password","errorMessage","setErrorMessage","navigate","handleChange","e","target","id","value","login","preventDefault","response","fetch","method","headers","body","JSON","stringify","ok","localStorage","setItem","window","dispatchEvent","Event","errorText","text","error","children","className","onSubmit","htmlFor","type","onChange","required","autoFocus"],"sources":["/Users/sanket/Documents/SUNY New Paltz/Classes/Summer Courses/UI Programming/bulbul-backend/src/frontend/src/components/pages/Login.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nexport const Login = () => {\n    const [formData, setFormData] = useState({\n        username: '',\n        password: ''\n    });\n\n    const [errorMessage, setErrorMessage] = useState('');\n    const navigate = useNavigate();\n\n    const handleChange = (e) => {\n        setFormData({\n            ...formData,\n            [e.target.id]: e.target.value,\n        });\n    };\n\n    const login = async (e) => {\n        e.preventDefault();\n        \n        try {\n            const response = await fetch('/users/login', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    username: formData.username,\n                    password: formData.password,\n                }),\n            });\n\n            if (response.ok) {\n                localStorage.setItem('username', formData.username);\n                window.dispatchEvent(new Event('loginStateChanged')); // Dispatch custom event\n\n                navigate('/peep'); // Redirect to peep page\n            } else {\n                const errorText = await response.text();\n                setErrorMessage(errorText);\n            }\n        } catch (error) {\n            setErrorMessage('Login failed. Please try again.');\n        }\n    };\n\n    return (\n        <main>\n            <div className=\"container\">\n                <h1>Login</h1>\n                <form onSubmit={login}>\n                    <div className=\"form-group\">\n                        <label htmlFor=\"username\">Username</label>\n                        <input \n                            type=\"text\" \n                            className=\"form-control\" \n                            id=\"username\" \n                            value={formData.username} \n                            onChange={handleChange} \n                            required \n                            autoFocus \n                        />\n                    </div>\n                    <div className=\"form-group\">\n                        <label htmlFor=\"password\">Password</label>\n                        <input \n                            id=\"password\" \n                            type=\"password\" \n                            className=\"form-control\" \n                            value={formData.password} \n                            onChange={handleChange} \n                            required \n                        />\n                    </div>\n                    <br />\n                    <button type=\"submit\" className=\"btn btn-primary\">Login</button>\n                </form>\n                {errorMessage && <div className=\"text-danger\"><h3>{errorMessage}</h3></div>}\n            </div>\n        </main>\n    );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}