{"ast":null,"code":"import React,{useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Peep=()=>{const[content,setContent]=useState('');const[errorMessage,setErrorMessage]=useState('');const[successMessage,setSuccessMessage]=useState('');const username=localStorage.getItem('username');// Get the logged-in username\nconst handleChange=e=>{setContent(e.target.value);};const createPeep=async e=>{e.preventDefault();if(content.trim()==='')return;try{const response=await fetch(\"http://localhost:8080/posts/\".concat(username),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({content})});if(response.ok){setContent('');setSuccessMessage('Peep created successfully!');setErrorMessage('');}else{const errorText=await response.text();setErrorMessage(errorText);setSuccessMessage('');}}catch(error){setErrorMessage('Error creating peep. Please try again.');setSuccessMessage('');}};return/*#__PURE__*/_jsx(\"main\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Peep !!!\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:createPeep,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"peepText\",children:\"Create Peep\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",id:\"content\",name:\"peepText\",rows:\"4\",value:content,onChange:handleChange,required:true,autoFocus:true})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Peep\"})]}),successMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"text-success\",children:/*#__PURE__*/_jsx(\"h3\",{children:successMessage})}),errorMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"text-danger\",children:/*#__PURE__*/_jsx(\"h3\",{children:errorMessage})})]})})]})});};export default Peep;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","Peep","content","setContent","errorMessage","setErrorMessage","successMessage","setSuccessMessage","username","localStorage","getItem","handleChange","e","target","value","createPeep","preventDefault","trim","response","fetch","concat","method","headers","body","JSON","stringify","ok","errorText","text","error","children","className","onSubmit","htmlFor","id","name","rows","onChange","required","autoFocus","type"],"sources":["/Users/sanket/Documents/SUNY New Paltz/Classes/Summer Courses/UI Programming/bulbul-backend/src/frontend/src/components/pages/Peep.js"],"sourcesContent":["import React, { useState } from 'react';\n\nconst Peep = () => {\n    const [content, setContent] = useState('');\n    const [errorMessage, setErrorMessage] = useState('');\n    const [successMessage, setSuccessMessage] = useState('');\n    const username = localStorage.getItem('username'); // Get the logged-in username\n\n    const handleChange = (e) => {\n        setContent(e.target.value);\n    };\n\n    const createPeep = async (e) => {\n        e.preventDefault();\n        if (content.trim() === '') return;\n\n        try {\n            const response = await fetch(`http://localhost:8080/posts/${username}`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({ content }),\n            });\n\n            if (response.ok) {\n                setContent('');\n                setSuccessMessage('Peep created successfully!');\n                setErrorMessage('');\n            } else {\n                const errorText = await response.text();\n                setErrorMessage(errorText);\n                setSuccessMessage('');\n            }\n        } catch (error) {\n            setErrorMessage('Error creating peep. Please try again.');\n            setSuccessMessage('');\n        }\n    };\n\n    return (\n        <main>\n            <div className=\"container\">\n                <h1>Peep !!!</h1>\n                <div className=\"row\">\n                    <div className=\"col-md-6\">\n                        <form onSubmit={createPeep}>\n                            <div className=\"form-group\">\n                                <label htmlFor=\"peepText\">Create Peep</label>\n                                <textarea\n                                    className=\"form-control\"\n                                    id=\"content\"\n                                    name=\"peepText\"\n                                    rows=\"4\"\n                                    value={content}\n                                    onChange={handleChange}\n                                    required\n                                    autoFocus\n                                ></textarea>\n                            </div>\n                            <br />\n                            <button type=\"submit\" className=\"btn btn-primary\">Peep</button>\n                        </form>\n                        {successMessage && <div className=\"text-success\"><h3>{successMessage}</h3></div>}\n                        {errorMessage && <div className=\"text-danger\"><h3>{errorMessage}</h3></div>}\n                    </div>\n                </div>\n            </div>\n        </main>\n    );\n};\n\nexport default Peep;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}